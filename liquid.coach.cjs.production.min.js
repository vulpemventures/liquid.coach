"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=require("react"),n=e(t),a=e(require("react-dom")),r=require("liquidjs-lib"),i=require("bip39"),s=require("bip32"),l=require("copy-lite"),o=e(require("bs58check")),c=require("react-hook-form"),u=e(require("use-global-storage"));function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function d(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var p=function(e){function t(){return e.apply(this,arguments)||this}d(t,e);var a=t.prototype;return a.changeUrl=function(){var e=prompt("Custom Electrs REST endpoint to use");try{if(!e||"string"!=typeof e||e.length<=0)throw new Error;new URL(e),e.includes("localhost")&&(e="http://"+e),this.props.onExplorer(e)}catch(e){alert("Not valid endpoint")}},a.render=function(){var e=this,t=this.props.onClean?n.createElement("span",{className:"button is-pulled-right",onClick:this.props.onClean},"Reset"):null,a=this.props.showExplorer?n.createElement("span",{className:"button is-pulled-right",onClick:function(){return e.changeUrl()}},"Explorer"):null,r=this.props.title?n.createElement("section",{className:"hero is-light"},n.createElement("div",{className:"hero-body"},n.createElement("div",{className:"container"},n.createElement("div",{className:"columns"},n.createElement("div",{className:"column is-8 is-desktop is-offset-2 has-text-centered"},n.createElement("h1",{className:"title"},this.props.title)),n.createElement("div",{className:"column is-1 has-text-centered"},a),n.createElement("div",{className:"column is-1 has-text-centered"},t))))):null;return n.createElement("div",{style:{minHeight:"100vh",position:"relative"}},r,n.createElement("div",{style:{paddingTop:"5rem",paddingRight:"1rem",paddingLeft:"1rem",paddingBottom:"5rem"}},this.props.children),n.createElement("footer",{style:{position:"absolute",bottom:0,height:"5rem",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},n.createElement("p",null,n.createElement("a",{href:"https://vulpem.com",target:"_blank",rel:"noopener noreferrer"},"© Vulpem Ventures OU"))))},t}(n.Component),f=function(e){var a=t.useState(""),r=a[0],i=a[1];return n.createElement("div",{className:"notification "+(e.bgColor||"is-success")},n.createElement("button",{className:"button is-pulled-right",onClick:function(){l.copyToClipboard(e.value),i("👌 Copied!")}},"Copy"),n.createElement("p",{className:"subtitle"},r),n.createElement("br",null),n.createElement("p",{className:"subtitle"},e.value))},h=new Map([["xpub","0488b21e"],["ypub","049d7cb2"],["Ypub","0295b43f"],["zpub","04b24746"],["Zpub","02aa7ed3"],["tpub","043587cf"],["upub","044a5262"],["Upub","024289ef"],["vpub","045f1cf6"],["Vpub","02575483"]]);function b(e){try{return r.ECPair.fromPrivateKey(Buffer.from(e,"hex")),!0}catch(e){return!1}}function v(e,t,n){switch(void 0===n&&(n=r.networks.regtest),t){case"asset":return 64===e.length;case"address":try{if(function(e){try{return r.address.fromConfidential(e),!0}catch(e){return!1}}(e))throw new Error("Unconfidential only");"LBTC_FEES"!==e&&r.address.toOutputScript(e,n)}catch(e){return console.error(e),!1}return!0;case"amount":try{r.confidential.satoshiToConfidentialValue(Number(e))}catch(e){return!1}return!0;default:return!1}}function E(e){return e.substring(0,4)+"..."+e.substring(e.length-4)}function g(e){return e.slice(1).reverse().toString("hex")}var y=function(e){var a=t.useState(!1),l=a[0],c=a[1],u=t.useState(!1),m=u[0],d=u[1],p=t.useState(!1),v=p[0],E=p[1],g=t.useState(""),y=g[0],N=g[1],x=t.useRef(null),w=t.useRef(null),k=l?"liquid":"regtest",S=r.networks[k];return n.createElement("div",{className:"column has-text-centered is-10-mobile is-6-desktop is-offset-1-mobile is-offset-3-desktop"},n.createElement("div",{className:"field",onClick:function(){return c(!l)}},n.createElement("input",{type:"checkbox",className:"switch is-medium is-link",checked:l,onChange:function(){}}),n.createElement("label",{className:"label"},l?"Liquid":"Regtest")),n.createElement("input",{type:"text",ref:x,className:"input is-medium mb-6",onChange:function(e){return function(e){try{var t=r.address.fromConfidential(e).blindingKey;E(!0),N(t.toString("hex"))}catch(e){E(!1)}}(e.target.value)},placeholder:"Your native segwit address here..."}),v&&n.createElement("input",{type:"text",ref:w,className:"input is-medium mb-6",placeholder:"Your private blinding key here (hex format)..."}),n.createElement("br",null),n.createElement("br",null),n.createElement("button",{className:"button is-link is-large",onClick:function(){if(!x||!x.current)return alert("Missing address");var t=x.current.value;if(!function(e,t){try{r.address.toOutputScript(e,t)}catch(e){return!1}return!0}(t,S))return alert("Given address is not a valid segwit address");if(v){if(!w||!w.current)return alert("Missing blinding key");var n=w.current.value;return b(n)?r.ECPair.fromPrivateKey(Buffer.from(n,"hex")).publicKey.toString("hex")!==y?alert("Given blinding private key do not corresponds to the given address"):e.onLoad(t,k,n):alert("Given blinding key is not valid")}e.onLoad(t,k)}},"Load"),n.createElement("br",null),n.createElement("br",null),n.createElement("div",null,n.createElement("p",{className:"subtitle"},"or create a new one..."),n.createElement("button",{className:"button is-primary is-large",onClick:function(){return d(!0)}},"Generate"),m&&function(){var t=i.generateMnemonic();if(!i.validateMnemonic(t))return alert("Something went wrong");var a=i.mnemonicToSeedSync(t),c=s.fromSeed(a,S),u=function(e,t){if(!h.has(t))return"Invalid target version";e=e.trim();try{var n=o.decode(e);return n=n.slice(4),n=Buffer.concat([Buffer.from(h.get(t),"hex"),n]),o.encode(n)}catch(e){throw new Error("Invalid extended public key! Please double check that you didn't accidentally paste extra data.")}}(c.toBase58(),l?"zpub":"vpub");return n.createElement("div",{className:"modal is-active"},n.createElement("div",{className:"modal-background"}),n.createElement("div",{className:"modal-card"},n.createElement("header",{className:"modal-card-head"},n.createElement("p",{className:"modal-card-title"},"Liquid ",l?"":"regtest"," wallet")),n.createElement("section",{className:"modal-card-body"},n.createElement("label",{className:"label"},"Mnemonic"),n.createElement("p",{className:"subtitle is-6"},"You will never see it again. You may want to write it down"),n.createElement(f,{value:t,bgColor:"is-info is-light"}),n.createElement("p",{className:"subtitle is-6"},"The derivation path used for generating the address is"," ",n.createElement("b",null,"m/84'/0'/0'/0")),n.createElement("label",{className:"label"},"Extended public key"),n.createElement(f,{value:u,bgColor:"is-info is-light"})),n.createElement("footer",{className:"modal-card-foot"},n.createElement("button",{className:"button is-primary",onClick:function(){var t=c.derivePath("m/84'/0'/0'/0"),n=r.payments.p2wpkh({pubkey:t.publicKey,network:S});e.onLoad(n.address,k)}},"Confirm"),n.createElement("button",{className:"button",onClick:function(){return d(!1)}},"Cancel"))))}()))},N=function(e){var a=t.useState(""),r=a[1];return n.createElement("span",{onClick:function(){l.copyToClipboard(e.value),r("👌 Copied!"),setTimeout((function(){return r("")}),1500)}},n.createElement("p",{className:e.textClass?e.textClass:"subtitle"},e.label||e.value," ",a[0]))},x=function(e){var a=e.utxos,i=e.lbtc,s=e.network,l=t.useState(0),o=l[0],u=l[1],m=t.useState(0),d=m[0],p=m[1],f=t.useState(e.inputs),h=f[0],b=f[1],g=t.useState(e.outputs),y=g[0],x=g[1],w=Object.keys(a),k=a[w[o]],S=c.useForm(),C=S.register,T=S.handleSubmit,B=S.errors,I=S.setError;return n.createElement("div",null,n.createElement("div",{className:"box"},n.createElement("h1",{className:"title"},"Inputs"),n.createElement("div",{className:"field has-addons"},n.createElement("div",{className:"control is-expanded has-text-centered"},n.createElement("label",{className:"label"},"Asset"),n.createElement("div",{className:"select is-info is-medium is-fullwidth"},n.createElement("select",{value:o,onChange:function(e){u(e.target.value),p(0)}},w.map((function(e,t){return n.createElement("option",{key:t,value:t},e===i?"L-BTC":E(e))}))))),n.createElement("div",{className:"control is-expanded has-text-centered"},n.createElement("label",{className:"label"},"Unspent"),n.createElement("div",{className:"select is-info is-medium is-fullwidth"},n.createElement("select",{value:d,onChange:function(e){return p(e.target.value)}},k.map((function(e,t){return n.createElement("option",{key:t,value:t},E(e.txid)+" "+e.value)}))))),n.createElement("div",{className:"control"},n.createElement("label",{style:{visibility:"hidden"},className:"label"},n.createElement("span",{role:"img","aria-label":"vulpem"},"🦊")),n.createElement("button",{className:"button is-link is-medium",onClick:function(e){e.preventDefault(),b((function(e){return e.concat([k[d]])}))}}," ","Add"," "))),n.createElement("span",null,h.map((function(e,t){return n.createElement("div",{key:t,className:"field has-addons"},n.createElement("button",{className:"button is-medium is-fullwidth",style:{borderColor:"transparent"}},n.createElement(N,{label:e.asset===i?"L-BTC":E(e.asset),value:e.asset})),n.createElement("button",{className:"button is-medium is-fullwidth",style:{borderColor:"transparent"}},n.createElement(N,{label:E(e.txid)+" "+e.value,value:e.txid})),n.createElement("button",{className:"button is-danger",onClick:function(){return function(e){return b(h.filter((function(t,n){return n!==e})))}(t)}},"Delete"))})))),n.createElement("div",{className:"box"},n.createElement("div",{className:"columns"},n.createElement("div",{className:"column is-6 is-offset-3"},n.createElement("h1",{className:"title"},"Outputs")),n.createElement("div",{className:"column is-3"},n.createElement("button",{className:"button is-pulled-right",onClick:function(){var e=prompt("Enter the amount in satoshis to cover fees");if(!e||isNaN(Number(e))||Number(e)<=0)return alert("Not a valid number");x((function(t){return t.concat([{value:e,address:"LBTC_FEES",asset:i}])}))}},"Add Fee output"))),n.createElement("form",{className:"form",onSubmit:T((function(e){return n=(t=e).amount,i=t.address,void(v(a=t.asset,"asset")?v(i,"address",r.networks[s])?v(n,"amount")?x((function(e){return e.concat([{value:n,asset:a,address:i}])})):I("amount"):I("address"):I("asset"));var t,n,a,i}))},n.createElement("div",{className:"field has-addons"},n.createElement("div",{className:"control is-expanded has-text-centered"},n.createElement("label",{className:"label"},"Asset"),n.createElement("input",{className:"input is-medium is-fullwidth",type:"text",name:"asset",placeholder:"Asset hash",ref:C({required:!0})}),B.asset&&n.createElement("div",{className:"notification is-danger"},"This field is not valid")),n.createElement("div",{className:"control is-expanded has-text-centered"},n.createElement("label",{className:"label"},"Address"),n.createElement("input",{className:"input is-medium is-fullwidth",name:"address",type:"text",placeholder:"Unconfidential address only",ref:C({required:!0})}),B.address&&n.createElement("div",{className:"notification is-danger"},"This field is not valid")),n.createElement("div",{className:"control is-expanded has-text-centered"},n.createElement("label",{className:"label"},"Amount"),n.createElement("input",{className:"input is-medium is-fullwidth",name:"amount",type:"number",placeholder:"In satoshis",ref:C({required:!0})}),B.amount&&n.createElement("div",{className:"notification is-danger"},"This field is not valid")),n.createElement("div",{className:"control"},n.createElement("label",{style:{visibility:"hidden"},className:"label"},n.createElement("span",{role:"img","aria-label":"vulpem"},"🦊")),n.createElement("button",{type:"submit",className:"button is-link is-medium"}," ","Add"," ")))),n.createElement("span",null,n.createElement("br",null),y.map((function(e,t){return n.createElement("div",{key:t,className:"field has-addons"},n.createElement("button",{className:"button is-medium is-fullwidth",style:{borderColor:"transparent"}},n.createElement(N,{label:E(e.asset),value:e.asset})),n.createElement("button",{className:"button is-medium is-fullwidth",style:{borderColor:"transparent"}},n.createElement(N,{label:E(e.address),value:e.address})),n.createElement("button",{className:"button is-medium is-fullwidth",style:{borderColor:"transparent"}},n.createElement(N,{label:e.value,value:e.value})),n.createElement("button",{className:"button is-danger",onClick:function(){return function(e){return x(y.filter((function(t,n){return n!==e})))}(t)}},"Delete"))})))),n.createElement("div",{className:"box is-centered"},n.createElement("p",{className:"subtitle"}," Total inputs ",h.length," "),n.createElement("p",{className:"subtitle"}," Total outputs ",y.length," "),n.createElement("button",{className:"button is-large",onClick:function(){return e.onEncode(h,y)}},n.createElement("span",{role:"img","aria-label":"encode psbt"},"🚜"),"‍Encode"),n.createElement("button",{className:"button is-large",onClick:e.onSign},n.createElement("span",{role:"img","aria-label":"sign psbt"},"✍"),"Sign")))};"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var w=function(e,t,n){try{return Promise.resolve(function(e,t){return S(t+"/address/"+e+"/utxo").then((function(e){return e.json()}))}(e,t)).then((function(e){function a(){return{balances:r.reduce((function(e,t){var n=t.asset;return e[n]=e[n]||0,e[n]+=t.value,e}),{}),utxos:r.reduce((function(e,t){var n=t.asset;return e[n]=e[n]||[],e[n].push(t),e}),{})}}var r=e.map((function(e){return e})),i=function(){if(n&&b(n))return Promise.resolve(k(r,n,t)).then((function(e){r=e}))}();return i&&i.then?i.then(a):a()}))}catch(e){return Promise.reject(e)}},k=function(e,t,n){try{var a=e.map((function(e){return S(n+"/tx/"+e.txid+"/hex").then((function(e){return e.text()})).then((function(t){return{prevOut:r.Transaction.fromHex(t).outs[e.vout],utxo:e}}))}));return Promise.resolve(function(e,n){try{var i=Promise.resolve(Promise.all(a)).then((function(e){return e.map((function(e){var n=e.prevOut,a=e.utxo,i=r.confidential.unblindOutput(n.nonce,Buffer.from(t,"hex"),n.rangeProof,n.value,n.asset,n.script),s=i.asset.reverse().toString("hex");return m({},i,{asset:s,txid:a.txid,vout:a.vout})}))}))}catch(e){return n(e)}return i&&i.then?i.then(void 0,n):i}(0,(function(e){throw e})))}catch(e){return Promise.reject(e)}},S=window.fetch,C={liquid:"https://blockstream.info/liquid/api",regtest:"https://nigiri.network/liquid/api"},T=function(){function e(e,t,n){try{if(r.address.toOutputScript(e,t),n&&!b)throw new Error("Invalid blinding key")}catch(e){throw new Error("Invalid address")}var a=r.payments.p2wpkh(m({},n?{confidentialAddress:e}:{address:e},{network:t}));this.scriptPubKey=a.output.toString("hex"),this.address=a.address,this.network=t,this.blindingKey=n}e.createTx=function(){return(new r.Psbt).toBase64()},e.isValidMnemonic=function(e){return i.validateMnemonic(e)},e.isValidWIF=function(e,t){try{return r.ECPair.fromWIF(e,t),!0}catch(e){return!1}};var t=e.prototype;return t.decodeTx=function(e){var t,n=this;try{t=r.Psbt.fromBase64(e)}catch(e){throw new Error("Invalid psbt")}var a=t.data.globalMap.unsignedTx.toBuffer(),i=r.Transaction.fromBuffer(a),s=[],l=[];return t.data.inputs.forEach((function(e,t){var n,a,l=i.ins[t].hash.reverse().toString("hex"),o=i.ins[t].index,c=e.witnessUtxo.script.toString("hex"),u=r.confidential.confidentialValueToSatoshi(null===(n=e.witnessUtxo)||void 0===n?void 0:n.value),m=g(null===(a=e.witnessUtxo)||void 0===a?void 0:a.asset);s.push({txid:l,vout:o,value:u,asset:m,script:c,partialSig:e.partialSig,sighashType:e.sighashType})})),i.outs.forEach((function(e){var t=g(e.asset),a=r.confidential.confidentialValueToSatoshi(e.value),i=e.script.equals(Buffer.alloc(0))?"LBTC_FEES":r.address.fromOutputScript(e.script,n.network);l.push({asset:t,value:a,address:i})})),{inputs:s,outputs:l}},t.updateTx=function(e,t,n){var a,i=this;try{a=r.Psbt.fromBase64(e)}catch(e){throw new Error("Invalid psbt")}return t.forEach((function(e){return a.addInput({hash:e.txid,index:e.vout,witnessUtxo:{script:e.script?Buffer.from(e.script,"hex"):Buffer.from(i.scriptPubKey,"hex"),asset:Buffer.concat([Buffer.from("01","hex"),Buffer.from(e.asset,"hex").reverse()]),value:r.confidential.satoshiToConfidentialValue(Number(e.value)),nonce:Buffer.from("00","hex")},partialSig:e.partialSig||[],sighashType:e.sighashType||r.Transaction.SIGHASH_ALL})})),n.forEach((function(e){var t="LBTC_FEES"===e.address?Buffer.alloc(0):r.address.toOutputScript(e.address,i.network);a.addOutput({script:t,asset:Buffer.concat([Buffer.from("01","hex"),Buffer.from(e.asset,"hex").reverse()]),value:r.confidential.satoshiToConfidentialValue(Number(e.value)),nonce:Buffer.from("00","hex")})})),a.toBase64()},t.signPsbtWithMnemonic=function(e,t){var n=i.mnemonicToSeedSync(t),a=s.fromSeed(n,this.network).derivePath("m/84'/0'/0'/0"),l=r.ECPair.fromWIF(a.toWIF(),this.network),o=r.Psbt.fromBase64(e);return this.sign(o,l)},t.signPsbtWithPrivateKey=function(e,t){var n=r.ECPair.fromWIF(t,this.network),a=r.Psbt.fromBase64(e);return this.sign(a,n)},t.sign=function(e,t){return this.partiallySign(e,t).extractTransaction().toHex()},t.partiallySign=function(e,t){return e.data.inputs.forEach((function(n,a){if(n.partialSig&&n.partialSig.length>0)return e.validateSignaturesOfInput(a),void e.finalizeInput(a);try{e.signInput(a,t),e.validateSignaturesOfInput(a),e.finalizeInput(a)}catch(e){console.warn(e)}})),e},e}();function B(e,t){return S(t+"/faucet",{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e})})}function I(e,t,n){return S(n+"/mint",{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e,quantity:t})})}var P=function(e){var a=e.network,i=e.lbtc,s=e.utxos,l=r.networks[a],o=new T(e.identity,l,e.blindingKey),c=t.useState(""),u=c[0],m=c[1];return n.createElement("div",null,n.createElement(x,{network:a,lbtc:i,utxos:s,inputs:[],outputs:[],onEncode:function(e,t){var n=T.createTx(),a=o.updateTx(n,e,t);m(a)},onSign:function(){if(0===u.length)return alert("Encode the transaction on every change before signing");var e=prompt("Enter your mnemonic or WIF private key");if(T.isValidMnemonic(e))try{var t=o.signPsbtWithMnemonic(u,e);return void m(t)}catch(e){return alert(e)}if(T.isValidWIF(e,l))try{var n=o.signPsbtWithPrivateKey(u,e);return void m(n)}catch(e){return alert(e)}return alert("Mnemonic or WIF not valid")}}),u.length>0&&n.createElement("div",{className:"box"}," ",n.createElement(f,{value:u})," "))},L=function(e){var a=e.network,i=e.lbtc,s=e.utxos,l=r.networks[a],o=new T(e.identity,l,e.blindingKey),c=t.useState({hasBeenDecoded:!1,inputs:[],outputs:[]}),u=c[0],m=c[1],d=t.useState(""),p=d[0],h=d[1],b=t.useRef(null);return n.createElement("div",null,n.createElement("div",{className:"field has-addons"},n.createElement("input",{type:"text",ref:b,className:"input is-medium",placeholder:"Your base64 encoded PSBT here..."}),n.createElement("button",{className:"button is-link is-medium",onClick:function(e){e.preventDefault();var t=o.decodeTx(b.current.value);m({hasBeenDecoded:!0,inputs:t.inputs,outputs:t.outputs})}},"Decode")),u.hasBeenDecoded&&n.createElement(x,{network:a,lbtc:i,utxos:s,inputs:u.inputs,outputs:u.outputs,onEncode:function(e,t){var n=T.createTx(),a=o.updateTx(n,e,t);h(a)},onSign:function(){if(0===p.length)return alert("Encode the transaction on every change before signing");var e=prompt("Enter your mnemonic or WIF private key");if(T.isValidMnemonic(e))try{var t=o.signPsbtWithMnemonic(p,e);return void h(t)}catch(e){return alert(e)}if(T.isValidWIF(e,l))try{var n=o.signPsbtWithPrivateKey(p,e);return void h(n)}catch(e){return alert(e)}return alert("Mnemonic or WIF not valid")}}),p.length>0&&n.createElement("div",{className:"box"}," ",n.createElement(f,{value:p})," "))},O=function(e){return n.createElement("div",{className:"hero box is-inline-block has-background-link",style:{borderRadius:"50%",height:"250px",width:"250px",margin:"2rem"}},n.createElement("div",{className:"hero-body"},n.createElement("div",{className:"container"},n.createElement("p",{className:"subtitle is-5 has-text-white"}," ",e.asset),n.createElement("h1",{className:"title is-2 has-text-white"}," ",e.balance.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:8})," "))))},q=function(e){return n.createElement("div",null,n.createElement("p",{className:"subtitle is-4"},"Balances"),n.createElement("div",{className:"buttons is-centered"},Object.entries(e.balances).map((function(t,a){var r,i,s=t[0],l=t[1];return r=s===e.lbtc?"L-BTC":E(s),n.createElement(O,{key:a,balance:(i=l,Math.floor(i)/Math.pow(10,8)),asset:r})}))))},F=function(){return n.createElement("section",{className:"section"},n.createElement("div",{className:"buttons is-centered"},n.createElement("span",{className:"loader"})))},K=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).state={showCreate:!1,showImport:!1,hasBalances:!1,balances:{},utxos:{},isLoading:!0},t.getBalances=function(){t.setState({isLoading:!0});var e=t.props;w(e.identity,e.explorerUrl||C[e.network],e.blindingKey).then((function(e){Object.keys(e.utxos).length>0?t.setState({balances:e.balances,utxos:e.utxos,hasBalances:!0,isLoading:!1}):t.setState({isLoading:!1})})).catch((function(e){console.error(e),alert("Something went wrong. Explorer may be down"),t.setState({isLoading:!1})}))},t.callFaucet=function(){t.setState({isLoading:!0}),B(t.props.identity,t.props.explorerUrl||C.regtest).then((function(){return t.getBalances()})).catch((function(e){console.error(e),alert("Something went wrong. Explorer may be down"),t.setState({isLoading:!1})}))},t.callMint=function(){t.setState({isLoading:!0});var e=prompt("How many asset you want to issue?");if(!e||isNaN(Number(e)))return alert("You need to pass a valid amount"),void t.setState({isLoading:!1});I(t.props.identity,Number(e),t.props.explorerUrl||C.regtest).then((function(){return t.getBalances()})).catch((function(e){console.error(e),alert("Something went wrong. Explorer may be down"),t.setState({isLoading:!1})}))},t}d(t,e);var a=t.prototype;return a.componentDidMount=function(){this.getBalances()},a.render=function(){var e=this,t=this.props,a=t.network,i=t.identity,s=t.blindingKey,l=this.state,o=l.showCreate,c=l.showImport,u=l.balances,m=l.hasBalances,d=l.isLoading,p=l.utxos,f=r.networks[a].assetHash,h="regtest"===a;return n.createElement("div",{className:"column has-text-centered"},n.createElement(N,{value:i,textClass:"title is-5"}),s&&n.createElement("span",null,n.createElement("br",null),n.createElement("p",{className:"title is-6"},"UNCONFIDENTIAL"),n.createElement(N,{value:r.address.fromConfidential(i).unconfidentialAddress,textClass:"title is-5"}),n.createElement("br",null),n.createElement("br",null)),!d&&m&&n.createElement(q,{balances:u,lbtc:f}),n.createElement("br",null),!d&&!m&&n.createElement("p",{className:"subtitle is-6"}," ","You don't have any unspent output. Your balances will appear here."," "),h&&!m&&!d&&n.createElement("button",{className:"button is-link",onClick:this.callFaucet},n.createElement("span",{role:"img","aria-label":"create"},"🚰")," ","Faucet"),h&&!d&&n.createElement("button",{className:"button is-link",onClick:this.callMint},n.createElement("span",{role:"img","aria-label":"create"},"💸")," ","Mint"),!m&&!d&&n.createElement("button",{className:"button",onClick:this.getBalances},n.createElement("span",{role:"img","aria-label":"create"},"♻")," ","Reload"),d&&n.createElement(F,null),m&&n.createElement("section",{className:"section"},n.createElement("p",{className:"subtitle is-4"},"Transaction"),n.createElement("button",{className:"button is-large "+(!d&&o&&"is-link"),onClick:function(){return e.setState({showCreate:!0,showImport:!1})}},n.createElement("span",{role:"img","aria-label":"create"},"🛠")," ","Create"),n.createElement("button",{className:"button is-large "+(!d&&c&&"is-link"),onClick:function(){return e.setState({showImport:!0,showCreate:!1})}},n.createElement("span",{role:"img","aria-label":"import"},"📀")," ","Import")),!d&&o&&n.createElement(P,{utxos:p,lbtc:f,identity:i,network:a,blindingKey:s}),!d&&c&&n.createElement(L,{utxos:p,lbtc:f,identity:i,network:a,blindingKey:s}))},t}(n.Component);a.render(n.createElement((function(){var e=u({storageOptions:{name:"liquid-coach-db"}})("state",null),t=e[0],a=e[1];return n.createElement("div",null,n.createElement(p,{title:"🏋️‍♂️ Liquid.Coach",showExplorer:!t,onExplorer:function(e){a({explorerUrl:e})},onClean:function(){a(null)}},n.createElement("div",{className:"container"},n.createElement("div",{className:"container"},n.createElement("div",{className:"columns"},t&&t.loaded?n.createElement(K,{identity:t.identity,network:t.network,blindingKey:t.blindingKey&&t.blindingKey.length>0?t.blindingKey:void 0,explorerUrl:t.explorerUrl}):n.createElement(y,{onLoad:function(e,n,r){a(m({loaded:!0,identity:e,network:n,blindingKey:r},t))}}))))))}),null),document.getElementById("root"));
//# sourceMappingURL=liquid.coach.cjs.production.min.js.map
